---
import BaseLayout from "../layouts/BaseLayout.astro";
import WritingItem from "../components/WritingItem.astro";
import creativeAutumnImg from "../assets/images/writing/creative-autumn.jpg";
import creatieveHerfstImg from "../assets/images/writing/creatief-herfst.jpg";
import musicSoundStoryImg from "../assets/images/writing/music-sound-story.jpg";
import muziekVerhaalImg from "../assets/images/writing/muziek-verhaal.jpg";

import "../styles/reset.css";
import "../styles/global.css";

const allPosts = Object.values(
    import.meta.glob("./content/writing/*.md", { eager: true }),
);

const pageTitle = "My writing";
const description =
    "A collection of my blog posts and music writing, exploring creativity, sound, and reflection in both English and Dutch.";
---

<BaseLayout title={pageTitle} description={description}>
    <div class="writing-page">
        <section class="intro">
            <h1>{pageTitle}</h1>
            <p>
                Welcome to my writing archive. Here youâ€™ll find both general
                blog posts and pieces about music writing.
            </p>

            <div class="language-filter">
                <button class="filter-btn active" data-lang="all">All</button>
                <button class="filter-btn" data-lang="en">English</button>
                <button class="filter-btn" data-lang="nl">Dutch</button>
            </div>
        </section>

        <section class="blog-posts">
            <h2>Blog Posts</h2>

            <WritingItem
                lang="en"
                title="Creative Routine in Autumn"
                date="October 2025"
                excerpt="Reflections on how the change of season shapes creativity and focus."
                tags={["english", "reflection", "routine"]}
                link={`${import.meta.env.BASE_URL}writing/blog-autumn`}
                image={creativeAutumnImg}
            />

            <WritingItem
                lang="nl"
                title="Herfstgedachten over inspiratie"
                date="Oktober 2025"
                excerpt="Een korte overdenking over hoe het seizoen invloed heeft op creatief werk."
                tags={["dutch", "inspiratie", "reflectie"]}
                link={`${import.meta.env.BASE_URL}writing/blog-herfst`}
                image={creatieveHerfstImg}
            />
        </section>

        <section class="music-posts">
            <h2>Music Writing</h2>

            <WritingItem
                lang="en"
                title="How Sound Becomes Story"
                date="September 2025"
                excerpt="Exploring the narrative potential of melody and rhythm."
                tags={["english", "music", "analysis"]}
                link={`${import.meta.env.BASE_URL}writing/music-sound-story`}
                image={musicSoundStoryImg}
            />

            <WritingItem
                lang="nl"
                title="Wanneer geluid een verhaal wordt"
                date="September 2025"
                excerpt="Over de manier waarop muziek emoties en verhalen kan oproepen."
                tags={["dutch", "muziek", "interview"]}
                link={`${import.meta.env.BASE_URL}writing/muziek-verhaal`}
                image={muziekVerhaalImg}
            />
        </section>
    </div>

    <script>
        const filterBtns = document.querySelectorAll(".filter-btn");
        const writingItems = document.querySelectorAll("[data-lang]");

        filterBtns.forEach((btn) => {
            btn.addEventListener("click", () => {
                const selectedLang = btn.getAttribute("data-lang");

                // Update active button
                filterBtns.forEach((b) => b.classList.remove("active"));
                btn.classList.add("active");

                // Filter writing items
                writingItems.forEach((item) => {
                    if (item.classList.contains("filter-btn")) return; // Skip filter buttons themselves

                    const itemLang = item.getAttribute("data-lang");

                    if (selectedLang === "all" || itemLang === selectedLang) {
                        item.style.display = "";
                    } else {
                        item.style.display = "none";
                    }
                });
            });
        });
    </script>
</BaseLayout>
