---
import BaseLayout from "../layouts/BaseLayout.astro";
import ProjectCard from "../components/ProjectCard.astro";
import lostFilesImg from "../assets/images/lost-files.jpg";
import offGridImg from "../assets/images/off-grid.jpg";
import houseRemembersImg from "../assets/images/house-remembers.jpg";
import clickFestivalImg from "../assets/images/click-festival.jpg";

import "../styles/reset.css";
import "../styles/global.css";

const allPosts = Object.values(
    import.meta.glob("./projects/*.md", { eager: true }),
);

// Pagination settings
const PROJECTS_PER_PAGE = 4;
const currentPage = 1;
const totalProjects = 4; // Update this as you add more projects
const totalPages = Math.ceil(totalProjects / PROJECTS_PER_PAGE);

const pageTitle = "Book of little things";
const description =
    "A collection of my design, code, and creative projects — small works that shaped how I think about design and development.";
---

<BaseLayout title={pageTitle} description={description}>
    <div class="projects-page">
        <section class="intro">
            <h2><em>Book of</em> little things</h2>
            <p>
                On this page, I’d like to show you some of my work — small
                projects, creative experiments, and assignments that helped
                shape how I think about design and code. I’m presenting them
                chronologically.
            </p>
        </section>

        <section class="project-list">
            <ProjectCard
                index="01"
                title="Land of Lost Files"
                year="2024"
                href={`${import.meta.env.BASE_URL}projects/land-of-lost-files`}
                description="My first visual design assignment, imagining a digital world filled with forgotten data — old files, obsolete formats, and memories from the early internet. A world of decay, nostalgia, and rediscovery."
                image={lostFilesImg}
            />

            <ProjectCard
                index="03"
                title="Off the Grid — Forgotten Musicians"
                year="2024"
                href={`${import.meta.env.BASE_URL}projects/off-the-grid`}
                description="A storytelling website designed for forgotten or past-their-prime musicians, encouraging them to reconnect with creativity outside of social media. A nostalgic yet playful “off the grid” digital retreat."
                image={offGridImg}
            />

            <ProjectCard
                index="04"
                title="The House Always Remembers"
                year="2025"
                href={`${import.meta.env.BASE_URL}projects/the-house-always-remembers`}
                description="A retro, speakeasy-inspired storytelling site built around reusing playing cards. Combines narrative, design, and interactivity to promote creative reuse with a glamorous, DIY twist."
                image={houseRemembersImg}
            />

            <ProjectCard
                index="05"
                title="Click Festival Showcase"
                year="2025"
                href={`${import.meta.env.BASE_URL}projects/click-festival-showcase`}
                description="A JavaScript-focused coding project for the Creative Code course. Combines animation, interaction, and playful logic to showcase experimental coding work in one cohesive digital experience."
                image={clickFestivalImg}
            />
        </section>

        <div class="pagination">
            <p class="pagination-info">
                Showing {PROJECTS_PER_PAGE} of {totalProjects} projects
            </p>
            <!-- Pagination will be active when you have more than 4 projects -->
            {
                totalPages > 1 && (
                    <nav class="pagination-nav" aria-label="Project pagination">
                        <button
                            class="pagination-btn"
                            disabled={currentPage === 1}
                            aria-label="Previous page"
                        >
                            ← Previous
                        </button>
                        <span class="pagination-current">
                            Page {currentPage} of {totalPages}
                        </span>
                        <button
                            class="pagination-btn"
                            disabled={currentPage === totalPages}
                            aria-label="Next page"
                        >
                            Next →
                        </button>
                    </nav>
                )
            }
        </div>
    </div>
</BaseLayout>

<style>
    .projects-page {
        padding: 1rem;
        max-width: var(--max-width-page);
        margin: 0 auto;
    }

    .projects-page .intro {
        margin-bottom: 2rem;
    }

    .projects-page .intro h2 {
        font-family: var(--font-serif);
        font-size: 2rem;
        margin-bottom: 0.5rem;
    }

    .projects-page .intro p {
        max-width: var(--max-width-text);
        line-height: 1.45;
    }

    .project-list {
        display: grid;
        gap: 2rem;
    }

    .project {
        display: flex;
        flex-direction: column;
        gap: 0.6rem;
    }

    .project-image {
        width: 85%;
        max-height: 300px;
        aspect-ratio: 1 / 1;
        object-fit: cover;
        border-radius: var(--radius-lg);
        border: 1px solid var(--black);
        display: block;
        margin: 0 auto 0.6rem auto;
        transition:
            transform var(--transition-fast),
            opacity var(--transition-fast);
    }

    .project-image:hover {
        transform: scale(1.03);
        opacity: 0.9;
    }

    .project h3 {
        font-size: 1.2rem;
        font-weight: 600;
    }

    .project h3 a {
        text-decoration: none;
        color: var(--black);
    }

    .project .year {
        font-size: 0.95rem;
        color: var(--gray);
    }

    .project .description {
        line-height: 1.4;
        max-width: var(--max-width-text);
    }

    @media (min-width: 700px) {
        .project-image {
            width: 100%;
            max-height: 400px;
            margin: 0 0 0.6rem 0;
        }

        .project-list {
            grid-template-columns: repeat(2, 1fr);
            gap: 2.5rem;
        }
    }

    .pagination {
        margin-top: 3rem;
        padding-top: 2rem;
        border-top: 1px solid var(--gray);
        text-align: center;
    }

    .pagination-info {
        color: var(--gray);
        font-size: 0.95rem;
        margin-bottom: 1.5rem;
    }

    .pagination-nav {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 1rem;
    }

    .pagination-btn {
        padding: 0.6rem 1.2rem;
        border: 2px solid var(--black);
        background: var(--white);
        color: var(--black);
        border-radius: 0.5rem;
        cursor: pointer;
        font-size: 0.95rem;
        font-family: var(--font-sans);
        transition: all 0.2s ease;
    }

    .pagination-btn:hover:not(:disabled) {
        background: var(--black);
        color: var(--white);
        transform: translateY(-2px);
    }

    .pagination-btn:disabled {
        opacity: 0.3;
        cursor: not-allowed;
    }

    .pagination-current {
        font-weight: 600;
        color: var(--black);
    }
</style>
